# 仿真还原：物体位置/航向角抖动

## 1. 问题描述

对于单目相机图像，在感知-追踪-补帧之后结果于仿真中渲染，发现1.部分车辆出现车辆位置抖动出现瞬移情况；2.车辆来回调头，即航向角大偏差。结合原始视频分析，原因如下：

> 问题1基本出现于静止车辆，由于感知算法不考虑时间相关性，产生的检测误差+位姿数据误差，无法保证静止车辆的世界坐标在不同帧之间保持一致性；
> 
> 问题1还有一种产生的情况，比如2辆车a/b由于检测在0帧检测到a，在1帧检测到b，并且a与b位置接近，在追踪模块将两者打上同一标签；
> 
> 问题2主要为感知结果误差(航向角相差180度)；

因此，在感知-追踪模块之后，加入/更新后处理模块。

<div align=center>
<img src="https://github.com/user-attachments/assets/f40c0855-c724-40b5-b694-fb4e16ffee33" width="400px">
</div>

## 2.具体方案

### 2.1 静态物体判断

根据下述条件判断是否为静止物体，对于静止物体固定世界坐标和航向角。

对于平均速度小于等于threshold_1，

$$
   norm(x(0.9) - x(0.1),y(0.9)-y(0.1)) * freq / n\_frames <= threshold_1 
$$

对于坐标区域长度小于threshold_2，



